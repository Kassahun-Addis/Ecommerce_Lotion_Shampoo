{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\online store website\\\\Skinecare-Makeup\\\\client\\\\src\\\\components\\\\Routes\\\\AdminRoute.js\",\n  _s = $RefreshSig$();\n// import { useState, useEffect } from \"react\";\n// import { useAuth } from \"../../context/auth\";\n// import { Outlet } from \"react-router-dom\";\n// import axios from \"axios\";\n// import Spinner from \"../Spinner\";\n\n// export default function PrivateRoute() {\n//   const [ok, setOk] = useState(false);\n//   const [auth, setAuth] = useAuth();\n\n//   useEffect(() => {\n//     const authCheck = async () => {\n//       const res = await axios.get(\"/api/v1/auth/admin-auth\");\n//       if (res.data.ok) {\n//         setOk(true);\n//       } else {\n//         setOk(false);\n//       }\n//     };\n//     if (auth?.token) authCheck();\n//   }, [auth?.token]);\n\n//   return ok ? <Outlet /> : <Spinner path=\"\" />;\n// }\nimport { useState, useEffect } from \"react\";\nimport { useAuth } from \"../../context/auth\";\nimport { Outlet, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Spinner from \"../Spinner\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PrivateRoute() {\n  _s();\n  const [ok, setOk] = useState(false);\n  const [auth, setAuth] = useAuth();\n  const navigate = useNavigate();\n  useEffect(() => {\n    const authCheck = async () => {\n      try {\n        const res = await axios.get(\"/api/v1/auth/admin-auth\");\n        if (res.data.ok) {\n          setOk(true);\n        } else {\n          setOk(false);\n          navigate(\"/\"); // Redirect to home or login page if not authorized\n        }\n      } catch (error) {\n        setOk(false);\n        navigate(\"/\"); // Redirect to home or login page if there's an error\n      }\n    };\n\n    if (auth !== null && auth !== void 0 && auth.token) authCheck();\n  }, [auth === null || auth === void 0 ? void 0 : auth.token, navigate]);\n  return ok ? /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 15\n  }, this) : /*#__PURE__*/_jsxDEV(Spinner, {\n    path: \"\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 28\n  }, this);\n}\n_s(PrivateRoute, \"a/QYRvgoD9fPHFbV6j7shDYYMCg=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = PrivateRoute;\nvar _c;\n$RefreshReg$(_c, \"PrivateRoute\");","map":{"version":3,"names":["useState","useEffect","useAuth","Outlet","useNavigate","axios","Spinner","PrivateRoute","ok","setOk","auth","setAuth","navigate","authCheck","res","get","data","error","token"],"sources":["C:/Users/HP/Desktop/online store website/Skinecare-Makeup/client/src/components/Routes/AdminRoute.js"],"sourcesContent":["// import { useState, useEffect } from \"react\";\n// import { useAuth } from \"../../context/auth\";\n// import { Outlet } from \"react-router-dom\";\n// import axios from \"axios\";\n// import Spinner from \"../Spinner\";\n\n// export default function PrivateRoute() {\n//   const [ok, setOk] = useState(false);\n//   const [auth, setAuth] = useAuth();\n\n//   useEffect(() => {\n//     const authCheck = async () => {\n//       const res = await axios.get(\"/api/v1/auth/admin-auth\");\n//       if (res.data.ok) {\n//         setOk(true);\n//       } else {\n//         setOk(false);\n//       }\n//     };\n//     if (auth?.token) authCheck();\n//   }, [auth?.token]);\n\n//   return ok ? <Outlet /> : <Spinner path=\"\" />;\n// }\nimport { useState, useEffect } from \"react\";\nimport { useAuth } from \"../../context/auth\";\nimport { Outlet, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Spinner from \"../Spinner\";\n\nexport default function PrivateRoute() {\n  const [ok, setOk] = useState(false);\n  const [auth, setAuth] = useAuth();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const authCheck = async () => {\n      try {\n        const res = await axios.get(\"/api/v1/auth/admin-auth\");\n        if (res.data.ok) {\n          setOk(true);\n        } else {\n          setOk(false);\n          navigate(\"/\"); // Redirect to home or login page if not authorized\n        }\n      } catch (error) {\n        setOk(false);\n        navigate(\"/\"); // Redirect to home or login page if there's an error\n      }\n    };\n    if (auth?.token) authCheck();\n  }, [auth?.token, navigate]);\n\n  return ok ? <Outlet /> : <Spinner path=\"\" />;\n}"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,OAAO,QAAQ,oBAAoB;AAC5C,SAASC,MAAM,EAAEC,WAAW,QAAQ,kBAAkB;AACtD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,OAAO,MAAM,YAAY;AAAC;AAEjC,eAAe,SAASC,YAAY,GAAG;EAAA;EACrC,MAAM,CAACC,EAAE,EAAEC,KAAK,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EACnC,MAAM,CAACU,IAAI,EAAEC,OAAO,CAAC,GAAGT,OAAO,EAAE;EACjC,MAAMU,QAAQ,GAAGR,WAAW,EAAE;EAE9BH,SAAS,CAAC,MAAM;IACd,MAAMY,SAAS,GAAG,YAAY;MAC5B,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMT,KAAK,CAACU,GAAG,CAAC,yBAAyB,CAAC;QACtD,IAAID,GAAG,CAACE,IAAI,CAACR,EAAE,EAAE;UACfC,KAAK,CAAC,IAAI,CAAC;QACb,CAAC,MAAM;UACLA,KAAK,CAAC,KAAK,CAAC;UACZG,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;QACjB;MACF,CAAC,CAAC,OAAOK,KAAK,EAAE;QACdR,KAAK,CAAC,KAAK,CAAC;QACZG,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;MACjB;IACF,CAAC;;IACD,IAAIF,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEQ,KAAK,EAAEL,SAAS,EAAE;EAC9B,CAAC,EAAE,CAACH,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEQ,KAAK,EAAEN,QAAQ,CAAC,CAAC;EAE3B,OAAOJ,EAAE,gBAAG,QAAC,MAAM;IAAA;IAAA;IAAA;EAAA,QAAG,gBAAG,QAAC,OAAO;IAAC,IAAI,EAAC;EAAE;IAAA;IAAA;IAAA;EAAA,QAAG;AAC9C;AAAC,GAxBuBD,YAAY;EAAA,QAEVL,OAAO,EACdE,WAAW;AAAA;AAAA,KAHNG,YAAY;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}