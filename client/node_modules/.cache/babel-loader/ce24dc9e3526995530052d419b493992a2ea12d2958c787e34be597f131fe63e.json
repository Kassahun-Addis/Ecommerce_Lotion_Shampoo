{"ast":null,"code":"import _toConsumableArray from\"C:/Users/HP/Desktop/online store website/Skinecare-Makeup/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/HP/Desktop/online store website/Skinecare-Makeup/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/HP/Desktop/online store website/Skinecare-Makeup/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/HP/Desktop/online store website/Skinecare-Makeup/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Layout from\"./../components/Layout/Layout\";import axios from\"axios\";import{useParams,useNavigate}from\"react-router-dom\";import{useTranslation}from\"react-i18next\";import\"../styles/ProductDetailsStyles.css\";import{useCart}from\"../context/cart\";import toast from\"react-hot-toast\";import{Badge}from\"antd\";import{NavLink}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductDetails=function ProductDetails(){var _product$price,_product$category;var _useTranslation=useTranslation(),t=_useTranslation.t;var params=useParams();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),total=_useState2[0],setTotal=_useState2[1];var navigate=useNavigate();var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),product=_useState4[0],setProduct=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),relatedProducts=_useState6[0],setRelatedProducts=_useState6[1];var _useCart=useCart(),_useCart2=_slicedToArray(_useCart,2),cart=_useCart2[0],setCart=_useCart2[1];//initalp details\nuseEffect(function(){if(params!==null&&params!==void 0&&params.slug)getProduct();getTotal();},[params===null||params===void 0?void 0:params.slug]);//get all total products\nvar getTotal=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/v1/product/product-count\");case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setTotal(data===null||data===void 0?void 0:data.total);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function getTotal(){return _ref.apply(this,arguments);};}();//getProduct\nvar getProduct=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _yield$axios$get2,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"/api/v1/product/get-product/\".concat(params.slug));case 3:_yield$axios$get2=_context2.sent;data=_yield$axios$get2.data;setProduct(data===null||data===void 0?void 0:data.product);getSimilarProduct(data===null||data===void 0?void 0:data.product._id,data===null||data===void 0?void 0:data.product.category._id);_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 12:case\"end\":return _context2.stop();}},_callee2,null,[[0,9]]);}));return function getProduct(){return _ref2.apply(this,arguments);};}();//get similar product\nvar getSimilarProduct=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(pid,cid){var _yield$axios$get3,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get(\"/api/v1/product/related-product/\".concat(pid,\"/\").concat(cid));case 3:_yield$axios$get3=_context3.sent;data=_yield$axios$get3.data;setRelatedProducts(data===null||data===void 0?void 0:data.products);_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 11:case\"end\":return _context3.stop();}},_callee3,null,[[0,8]]);}));return function getSimilarProduct(_x,_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row container product-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/api/v1/product/product-photo/\".concat(product._id),className:\"card-img-top\",alt:product.name,height:\"300\",width:\"350px\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 product-details-info\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:t(\"ProductDetail\")}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"h6\",{children:[t(\"Name\"),\" : \",product.name]}),/*#__PURE__*/_jsxs(\"h6\",{children:[t(\"Description\"),\" : \",product.description]}),/*#__PURE__*/_jsxs(\"h6\",{children:[t(\"Price\"),\" :\",product===null||product===void 0?void 0:(_product$price=product.price)===null||_product$price===void 0?void 0:_product$price.toLocaleString(\"en-US\",{style:\"currency\",currency:\"USD\"})]}),/*#__PURE__*/_jsxs(\"h6\",{children:[t(\"Category\"),\" : \",product===null||product===void 0?void 0:(_product$category=product.category)===null||_product$category===void 0?void 0:_product$category.name]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-dark bg-primary mt-3\",children:/*#__PURE__*/_jsx(NavLink,{to:\"/cart\",className:\"nav-link\",children:/*#__PURE__*/_jsx(Badge,{count:cart===null||cart===void 0?void 0:cart.length,showZero:true,offset:[10,-5],children:t(\"header:Cart\")})})})]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"row container similar-products\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[t(\"SimilarProduct\"),\" \\u27A1\\uFE0F\"]}),relatedProducts.length<1&&/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:t(\"SimilarProduct\")}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-wrap\",children:relatedProducts===null||relatedProducts===void 0?void 0:relatedProducts.map(function(p){return/*#__PURE__*/_jsxs(\"div\",{className:\"card m-2\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/api/v1/product/product-photo/\".concat(p._id),className:\"card-img-top\",alt:p.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-name-price\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:p.name}),/*#__PURE__*/_jsx(\"h5\",{className:\"card-title card-price\",children:p.price.toLocaleString(\"en-US\",{style:\"currency\",currency:\"USD\"})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text \",children:[p.description.substring(0,60),\"...\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-name-price\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info ms-1\",onClick:function onClick(){return navigate(\"/product/\".concat(p.slug));},children:t(\"NoSimilar\")}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark ms-1\",onClick:function onClick(){setCart([].concat(_toConsumableArray(cart),[p]));localStorage.setItem(\"cart\",JSON.stringify([].concat(_toConsumableArray(cart),[p])));toast.success(\"Item Added to cart\");},children:\"ADD TO CART\"})]})]})]},p._id);})})]})]});};export default ProductDetails;","map":{"version":3,"names":["React","useState","useEffect","Layout","axios","useParams","useNavigate","useTranslation","useCart","toast","Badge","NavLink","ProductDetails","t","params","total","setTotal","navigate","product","setProduct","relatedProducts","setRelatedProducts","cart","setCart","slug","getProduct","getTotal","get","data","console","log","getSimilarProduct","_id","category","pid","cid","products","name","description","price","toLocaleString","style","currency","length","map","p","substring","localStorage","setItem","JSON","stringify","success"],"sources":["C:/Users/HP/Desktop/online store website/Skinecare-Makeup/client/src/pages/ProductDetails.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Layout from \"./../components/Layout/Layout\";\nimport axios from \"axios\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport \"../styles/ProductDetailsStyles.css\";\nimport { useCart } from \"../context/cart\";\nimport toast from \"react-hot-toast\";\nimport { Badge } from \"antd\";\nimport { NavLink } from \"react-router-dom\";\nconst ProductDetails = () => {\n  const { t } = useTranslation();\n  const params = useParams();\n  const [total, setTotal] = useState(0);\n  const navigate = useNavigate();\n  const [product, setProduct] = useState({});\n  const [relatedProducts, setRelatedProducts] = useState([]);\n  const [cart, setCart] = useCart();\n  //initalp details\n  useEffect(() => {\n    if (params?.slug) getProduct();\n    getTotal();\n  }, [params?.slug]);\n\n  //get all total products\n  const getTotal = async () => {\n    try {\n      const { data } = await axios.get(\"/api/v1/product/product-count\");\n      setTotal(data?.total);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  //getProduct\n  const getProduct = async () => {\n    try {\n      const { data } = await axios.get(\n        `/api/v1/product/get-product/${params.slug}`\n      );\n      setProduct(data?.product);\n      getSimilarProduct(data?.product._id, data?.product.category._id);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  //get similar product\n  const getSimilarProduct = async (pid, cid) => {\n    try {\n      const { data } = await axios.get(\n        `/api/v1/product/related-product/${pid}/${cid}`\n      );\n      setRelatedProducts(data?.products);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <Layout>\n      <div className=\"row container product-details\">\n        <div className=\"col-md-6\">\n          <img\n            src={`/api/v1/product/product-photo/${product._id}`}\n            className=\"card-img-top\"\n            alt={product.name}\n            height=\"300\"\n            width={\"350px\"}\n          />\n        </div>\n        <div className=\"col-md-6 product-details-info\">\n          <h1 className=\"text-center\">{t(\"ProductDetail\")}</h1>\n          <hr />\n          <h6>\n            {t(\"Name\")} : {product.name}\n          </h6>\n          <h6>\n            {t(\"Description\")} : {product.description}\n          </h6>\n          <h6>\n            {t(\"Price\")} :\n            {product?.price?.toLocaleString(\"en-US\", {\n              style: \"currency\",\n              currency: \"USD\",\n            })}\n          </h6>\n          <h6>\n            {t(\"Category\")} : {product?.category?.name}\n          </h6>\n          <button className=\"btn btn-outline-dark bg-primary mt-3\">\n            <NavLink to=\"/cart\" className=\"nav-link\">\n              <Badge count={cart?.length} showZero offset={[10, -5]}>\n                {t(\"header:Cart\")}\n              </Badge>\n            </NavLink>\n          </button>\n        </div>\n      </div>\n      <hr />\n      <div className=\"row container similar-products\">\n        <h4>{t(\"SimilarProduct\")} ➡️</h4>\n        {relatedProducts.length < 1 && (\n          <p className=\"text-center\">{t(\"SimilarProduct\")}</p>\n        )}\n        <div className=\"d-flex flex-wrap\">\n          {relatedProducts?.map((p) => (\n            <div className=\"card m-2\" key={p._id}>\n              <img\n                src={`/api/v1/product/product-photo/${p._id}`}\n                className=\"card-img-top\"\n                alt={p.name}\n              />\n              <div className=\"card-body\">\n                <div className=\"card-name-price\">\n                  <h5 className=\"card-title\">{p.name}</h5>\n                  <h5 className=\"card-title card-price\">\n                    {p.price.toLocaleString(\"en-US\", {\n                      style: \"currency\",\n                      currency: \"USD\",\n                    })}\n                  </h5>\n                </div>\n                <p className=\"card-text \">\n                  {p.description.substring(0, 60)}...\n                </p>\n                <div className=\"card-name-price\">\n                  <button\n                    className=\"btn btn-info ms-1\"\n                    onClick={() => navigate(`/product/${p.slug}`)}\n                  >\n                    {t(\"NoSimilar\")}\n                  </button>\n                  <button\n                    className=\"btn btn-dark ms-1\"\n                    onClick={() => {\n                      setCart([...cart, p]);\n                      localStorage.setItem(\n                        \"cart\",\n                        JSON.stringify([...cart, p])\n                      );\n                      toast.success(\"Item Added to cart\");\n                    }}\n                  >\n                    ADD TO CART\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default ProductDetails;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}