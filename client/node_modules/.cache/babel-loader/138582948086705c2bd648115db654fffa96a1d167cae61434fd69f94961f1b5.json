{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/HP/Desktop/online store website/Skinecare-Makeup/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/HP/Desktop/online store website/Skinecare-Makeup/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/HP/Desktop/online store website/Skinecare-Makeup/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// import { useState, useEffect } from \"react\";\n// import { useAuth } from \"../../context/auth\";\n// import { Outlet } from \"react-router-dom\";\n// import axios from \"axios\";\n// import Spinner from \"../Spinner\";\n// export default function PrivateRoute() {\n//   const [ok, setOk] = useState(false);\n//   const [auth, setAuth] = useAuth();\n//   useEffect(() => {\n//     const authCheck = async () => {\n//       const res = await axios.get(\"/api/v1/auth/admin-auth\");\n//       if (res.data.ok) {\n//         setOk(true);\n//       } else {\n//         setOk(false);\n//       }\n//     };\n//     if (auth?.token) authCheck();\n//   }, [auth?.token]);\n//   return ok ? <Outlet /> : <Spinner path=\"\" />;\n// }\nimport{useState,useEffect}from\"react\";import{useAuth}from\"../../context/auth\";import{Outlet,useNavigate}from\"react-router-dom\";import axios from\"axios\";import Spinner from\"../Spinner\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function PrivateRoute(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),ok=_useState2[0],setOk=_useState2[1];var _useAuth=useAuth(),_useAuth2=_slicedToArray(_useAuth,2),auth=_useAuth2[0],setAuth=_useAuth2[1];var navigate=useNavigate();useEffect(function(){var authCheck=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/v1/auth/admin-auth\");case 3:res=_context.sent;if(res.data.ok){setOk(true);}else{setOk(false);navigate(\"/\");// Redirect to home or login page if not authorized\n}_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);setOk(false);navigate(\"/\");// Redirect to home or login page if there's an error\ncase 11:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function authCheck(){return _ref.apply(this,arguments);};}();if(auth!==null&&auth!==void 0&&auth.token)authCheck();},[auth===null||auth===void 0?void 0:auth.token,navigate]);return ok?/*#__PURE__*/_jsx(Outlet,{}):/*#__PURE__*/_jsx(Spinner,{path:\"\"});}","map":{"version":3,"names":["useState","useEffect","useAuth","Outlet","useNavigate","axios","Spinner","PrivateRoute","ok","setOk","auth","setAuth","navigate","authCheck","get","res","data","token"],"sources":["C:/Users/HP/Desktop/online store website/Skinecare-Makeup/client/src/components/Routes/AdminRoute.js"],"sourcesContent":["// import { useState, useEffect } from \"react\";\n// import { useAuth } from \"../../context/auth\";\n// import { Outlet } from \"react-router-dom\";\n// import axios from \"axios\";\n// import Spinner from \"../Spinner\";\n\n// export default function PrivateRoute() {\n//   const [ok, setOk] = useState(false);\n//   const [auth, setAuth] = useAuth();\n\n//   useEffect(() => {\n//     const authCheck = async () => {\n//       const res = await axios.get(\"/api/v1/auth/admin-auth\");\n//       if (res.data.ok) {\n//         setOk(true);\n//       } else {\n//         setOk(false);\n//       }\n//     };\n//     if (auth?.token) authCheck();\n//   }, [auth?.token]);\n\n//   return ok ? <Outlet /> : <Spinner path=\"\" />;\n// }\nimport { useState, useEffect } from \"react\";\nimport { useAuth } from \"../../context/auth\";\nimport { Outlet, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Spinner from \"../Spinner\";\n\nexport default function PrivateRoute() {\n  const [ok, setOk] = useState(false);\n  const [auth, setAuth] = useAuth();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const authCheck = async () => {\n      try {\n        const res = await axios.get(\"/api/v1/auth/admin-auth\");\n        if (res.data.ok) {\n          setOk(true);\n        } else {\n          setOk(false);\n          navigate(\"/\"); // Redirect to home or login page if not authorized\n        }\n      } catch (error) {\n        setOk(false);\n        navigate(\"/\"); // Redirect to home or login page if there's an error\n      }\n    };\n    if (auth?.token) authCheck();\n  }, [auth?.token, navigate]);\n\n  return ok ? <Outlet /> : <Spinner path=\"\" />;\n}"],"mappings":"kdAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,OAAO,KAAQ,oBAAoB,CAC5C,OAASC,MAAM,CAAEC,WAAW,KAAQ,kBAAkB,CACtD,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,QAAO,KAAM,YAAY,CAAC,2CAEjC,cAAe,SAASC,aAAY,EAAG,CACrC,cAAoBP,QAAQ,CAAC,KAAK,CAAC,wCAA5BQ,EAAE,eAAEC,KAAK,eAChB,aAAwBP,OAAO,EAAE,sCAA1BQ,IAAI,cAAEC,OAAO,cACpB,GAAMC,SAAQ,CAAGR,WAAW,EAAE,CAE9BH,SAAS,CAAC,UAAM,CACd,GAAMY,UAAS,4FAAG,kLAEIR,MAAK,CAACS,GAAG,CAAC,yBAAyB,CAAC,QAAhDC,GAAG,eACT,GAAIA,GAAG,CAACC,IAAI,CAACR,EAAE,CAAE,CACfC,KAAK,CAAC,IAAI,CAAC,CACb,CAAC,IAAM,CACLA,KAAK,CAAC,KAAK,CAAC,CACZG,QAAQ,CAAC,GAAG,CAAC,CAAE;AACjB,CAAC,+EAEDH,KAAK,CAAC,KAAK,CAAC,CACZG,QAAQ,CAAC,GAAG,CAAC,CAAE;AAAA,mEAElB,kBAbKC,UAAS,0CAad,CACD,GAAIH,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEO,KAAK,CAAEJ,SAAS,EAAE,CAC9B,CAAC,CAAE,CAACH,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEO,KAAK,CAAEL,QAAQ,CAAC,CAAC,CAE3B,MAAOJ,GAAE,cAAG,KAAC,MAAM,IAAG,cAAG,KAAC,OAAO,EAAC,IAAI,CAAC,EAAE,EAAG,CAC9C"},"metadata":{},"sourceType":"module","externalDependencies":[]}