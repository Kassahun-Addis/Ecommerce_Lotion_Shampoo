{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/HP/Desktop/online store website/Skinecare-Makeup/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/HP/Desktop/online store website/Skinecare-Makeup/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/HP/Desktop/online store website/Skinecare-Makeup/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Layout from\"./../../components/Layout/Layout\";import AdminMenu from\"./../../components/Layout/AdminMenu\";import toast from\"react-hot-toast\";import axios from\"axios\";import{Select}from\"antd\";import{useTranslation}from\"react-i18next\";import{useNavigate,useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Option=Select.Option;var UpdateProduct=function UpdateProduct(){var _useTranslation=useTranslation(),t=_useTranslation.t;var navigate=useNavigate();var params=useParams();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),categories=_useState2[0],setCategories=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),summary=_useState6[0],setSummary=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),content=_useState8[0],setContent=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),photo=_useState10[0],setPhoto=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),id=_useState12[0],setId=_useState12[1];//get single product\nvar getSinglePost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/v1/post/get-post/\".concat(params.slug));case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setTitle(data.post.title);setId(data.post._id);setSummary(data.post.summary);setContent(data.post.content);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));return function getSinglePost(){return _ref.apply(this,arguments);};}();useEffect(function(){getSinglePost();//eslint-disable-next-line\n},[]);//create product function\nvar handleUpdate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var postData,_axios$put,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();try{postData=new FormData();postData.append(\"title\",title);postData.append(\"summary\",summary);postData.append(\"content\",content);photo&&postData.append(\"photo\",photo);_axios$put=axios.put(\"/api/v1/post/update-post/\".concat(id),postData),data=_axios$put.data;if(data!==null&&data!==void 0&&data.success){toast.error(data===null||data===void 0?void 0:data.message);}else{toast.success(\"blog Updated Successfully\");navigate(\"/dashboard/admin/posts\");}}catch(error){console.log(error);toast.error(\"something went wrong\");}case 2:case\"end\":return _context2.stop();}},_callee2);}));return function handleUpdate(_x){return _ref2.apply(this,arguments);};}();//delete a product\nvar handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var answer,_yield$axios$delete,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;answer=window.prompt(\"Are You Sure want to delete this blog ? \");if(answer){_context3.next=4;break;}return _context3.abrupt(\"return\");case 4:_context3.next=6;return axios.delete(\"/api/v1/post/delete-post/\".concat(id));case 6:_yield$axios$delete=_context3.sent;data=_yield$axios$delete.data;toast.success(\"Post Deleted Succfully\");navigate(\"/dashboard/admin/posts\");_context3.next=16;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);toast.error(\"Something went wrong\");case 16:case\"end\":return _context3.stop();}},_callee3,null,[[0,12]]);}));return function handleDelete(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Layout,{title:\"Dashboard - Update bolg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",style:{marginTop:\"3rem\",padding:\"3rem\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(AdminMenu,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-9\",children:[/*#__PURE__*/_jsx(\"h1\",{children:t(\"updateProduct:UpdateProduct\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"m-1 w-75\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"btn btn-outline-secondary col-md-12\",children:[photo?photo.name:\"Upload Photo\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"photo\",accept:\"image/*\",onChange:function onChange(e){return setPhoto(e.target.files[0]);},hidden:true})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:photo?/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(photo),alt:\"product_photo\",height:\"200px\",className:\"img img-responsive\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/api/v1/post/post-photo/\".concat(id),alt:\"blog_photo\",height:\"200px\",className:\"img img-responsive\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,placeholder:t(\"updateProduct:writename\"),className:\"form-control\",onChange:function onChange(e){return setTitle(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",value:summary,placeholder:t(\"updateProduct:writeDescription\"),className:\"form-control\",onChange:function onChange(e){return setSummary(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleUpdate,children:t(\"updateProduct:UPDATEPRODUCT\")})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:handleDelete,children:t(\"updateProduct:DELETEPRODUCT\")})})]})]})]})})});};export default UpdateProduct;","map":{"version":3,"names":["React","useState","useEffect","Layout","AdminMenu","toast","axios","Select","useTranslation","useNavigate","useParams","Option","UpdateProduct","t","navigate","params","categories","setCategories","title","setTitle","summary","setSummary","content","setContent","photo","setPhoto","id","setId","getSinglePost","get","slug","data","post","_id","console","log","handleUpdate","e","preventDefault","postData","FormData","append","put","success","error","message","handleDelete","answer","window","prompt","delete","marginTop","padding","name","target","files","URL","createObjectURL","value"],"sources":["C:/Users/HP/Desktop/online store website/Skinecare-Makeup/client/src/pages/Admin/EditPost.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"./../../components/Layout/Layout\";\r\nimport AdminMenu from \"./../../components/Layout/AdminMenu\";\r\nimport toast from \"react-hot-toast\";\r\nimport axios from \"axios\";\r\nimport { Select } from \"antd\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nconst { Option } = Select;\r\n\r\nconst UpdateProduct = () => {\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n  const params = useParams();\r\n  const [categories, setCategories] = useState([]);\r\n  const [title, setTitle] = useState(\"\");\r\n  const [summary, setSummary] = useState(\"\");\r\n  const [content, setContent] = useState(\"\");\r\n  const [photo, setPhoto] = useState(\"\");\r\n  const [id, setId] = useState(\"\");\r\n\r\n  //get single product\r\n  const getSinglePost = async () => {\r\n    try {\r\n      const { data } = await axios.get(`/api/v1/post/get-post/${params.slug}`);\r\n      setTitle(data.post.title);\r\n      setId(data.post._id);\r\n      setSummary(data.post.summary);\r\n      setContent(data.post.content);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getSinglePost();\r\n    //eslint-disable-next-line\r\n  }, []);\r\n\r\n  //create product function\r\n  const handleUpdate = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const postData = new FormData();\r\n      postData.append(\"title\", title);\r\n      postData.append(\"summary\", summary);\r\n      postData.append(\"content\", content);\r\n      photo && postData.append(\"photo\", photo);\r\n      const { data } = axios.put(`/api/v1/post/update-post/${id}`, postData);\r\n      if (data?.success) {\r\n        toast.error(data?.message);\r\n      } else {\r\n        toast.success(\"blog Updated Successfully\");\r\n        navigate(\"/dashboard/admin/posts\");\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      toast.error(\"something went wrong\");\r\n    }\r\n  };\r\n\r\n  //delete a product\r\n  const handleDelete = async () => {\r\n    try {\r\n      let answer = window.prompt(\"Are You Sure want to delete this blog ? \");\r\n      if (!answer) return;\r\n      const { data } = await axios.delete(`/api/v1/post/delete-post/${id}`);\r\n      toast.success(\"Post Deleted Succfully\");\r\n      navigate(\"/dashboard/admin/posts\");\r\n    } catch (error) {\r\n      console.log(error);\r\n      toast.error(\"Something went wrong\");\r\n    }\r\n  };\r\n  return (\r\n    <Layout title={\"Dashboard - Update bolg\"}>\r\n      <div\r\n        className=\"container-fluid\"\r\n        style={{ marginTop: \"3rem\", padding: \"3rem\" }}\r\n      >\r\n        <div className=\"row\">\r\n          <div className=\"col-md-3\">\r\n            <AdminMenu />\r\n          </div>\r\n          <div className=\"col-md-9\">\r\n            <h1>{t(\"updateProduct:UpdateProduct\")}</h1>\r\n            <div className=\"m-1 w-75\">\r\n              <div className=\"mb-3\">\r\n                <label className=\"btn btn-outline-secondary col-md-12\">\r\n                  {photo ? photo.name : \"Upload Photo\"}\r\n                  <input\r\n                    type=\"file\"\r\n                    name=\"photo\"\r\n                    accept=\"image/*\"\r\n                    onChange={(e) => setPhoto(e.target.files[0])}\r\n                    hidden\r\n                  />\r\n                </label>\r\n              </div>\r\n              <div className=\"mb-3\">\r\n                {photo ? (\r\n                  <div className=\"text-center\">\r\n                    <img\r\n                      src={URL.createObjectURL(photo)}\r\n                      alt=\"product_photo\"\r\n                      height={\"200px\"}\r\n                      className=\"img img-responsive\"\r\n                    />\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center\">\r\n                    <img\r\n                      src={`/api/v1/post/post-photo/${id}`}\r\n                      alt=\"blog_photo\"\r\n                      height={\"200px\"}\r\n                      className=\"img img-responsive\"\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"mb-3\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={title}\r\n                  placeholder={t(\"updateProduct:writename\")}\r\n                  className=\"form-control\"\r\n                  onChange={(e) => setTitle(e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"mb-3\">\r\n                <textarea\r\n                  type=\"text\"\r\n                  value={summary}\r\n                  placeholder={t(\"updateProduct:writeDescription\")}\r\n                  className=\"form-control\"\r\n                  onChange={(e) => setSummary(e.target.value)}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"mb-3\">\r\n                <button className=\"btn btn-primary\" onClick={handleUpdate}>\r\n                  {t(\"updateProduct:UPDATEPRODUCT\")}\r\n                </button>\r\n              </div>\r\n              <div className=\"mb-3\">\r\n                <button className=\"btn btn-danger\" onClick={handleDelete}>\r\n                  {t(\"updateProduct:DELETEPRODUCT\")}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default UpdateProduct;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}